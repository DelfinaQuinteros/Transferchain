<!DOCTYPE html>
<html>
<head>
  <title>Perfil de Usuario</title>
  <style>
    /* Estilos generales */
    body {
      font-family: Arial, sans-serif;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Estilos de las tarjetas de transferencia */
    .transfer-card {
      background-color: #f2f2f2;
      padding: 20px;
      margin-bottom: 20px;
    }

    .transfer-card h3 {
      margin-top: 0;
    }

    .transfer-card p {
      margin-bottom: 10px;
    }

    /* Estilos de las tarjetas de certificados */
    .certificate-card {
      background-color: #f2f2f2;
      padding: 20px;
      margin-bottom: 20px;
    }

    .certificate-card h3 {
      margin-top: 0;
    }

    .certificate-card p {
      margin-bottom: 10px;
    }

    /* Estilos para el modo oscuro */
    body.dark-mode {
      background-color: #333;
      color: #fff;
    }

    .dark-mode .transfer-card {
      background-color: #444;
    }

    .dark-mode .certificate-card {
      background-color: #444;
    }

    .new-transfer-button {
      text-align: center;
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-components-web/10.0.0/material-components-web.min.css">
  <link rel="stylesheet" href="static/css/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/material-components-web/10.0.0/material-components-web.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" style="display: flex; align-items: center;">
          <img src="static/img/logo.png" alt="" width="35" height="35" class="d-inline-block align-text-center">
          <span style="margin-left: 10px;">Transferchain</span>
        </a>
        <!-- Botón para elegir el modo claro u oscuro -->
      </div>
    </nav>
  <div class="container">
    <br></br>
    <h1 style="font-family: 'Arial Black', sans-serif;">Perfil de Usuario</h1>
    <br></br>
    <!-- Datos del usuario -->
    <h2>Datos del Usuario</h2>
    <p>ID: {{ user.id }}</p>
    <p>Nombre: {{ user.name }}</p>
    <p>Apellido: {{ user.last_name }}</p>
    <p>Dirección: {{ user.address }}</p>
    <p>DNI: {{ user.dni }}</p>
    <p>Correo electrónico: {{ user.email }}</p>

    <br></br>

    <!-- Autos del usuario -->
  <h2>Autos del Usuario</h2>

  {% for car in cars %}
  <div class="transfer-card">
    <h3>Auto #{{ car.id }}</h3>
    <p>Marca: {{ car.brand }}</p>
    <p>Modelo: {{ car.model }}</p>
    <p>Año: {{ car.year }}</p>
  </div>
  {% endfor %}

    <!-- Transferencias de autos -->
    <h2>Transferencias de Autos</h2>

  {% for transfer in transfers %}
  <div class="transfer-card">
    <h3>Transferencia #{{ transfer.id }}</h3>
    <p>Propietario anterior: {{ transfer.owner_user.name }} {{ transfer.owner_user.last_name }}</p>
    <p>Nuevo propietario: {{ transfer.new_owner_user.name }} {{ transfer.new_owner_user.last_name }}</p>
    <p>Auto: {{ transfer.car.brand }} {{ transfer.car.model }} ({{ transfer.car.year }})</p>
  </div>
  {% endfor %}

  <div class="new-transfer-button">
    <button class="btn btn-outline-secondary" onclick="redirectToTransfer()">Transferir</button>
  </div>

  <script>
  function redirectToTransfer() {
    window.location.href = "/transfer";
  }
  </script>
    <!-- Certificados de transferencias -->
    <h2>Certificados de Transferencias</h2>

  {% for certificate in certificates %}
  <div class="certificate-card">
    <h3>Certificado #{{ loop.index }}</h3>
    <p>Fecha de emisión: {{ certificate.timestamp }}</p>
    <p>Id de la transferencia: {{ certificate.transfer_id }}</p>
    <p>Nuevo dueño: {{ certificate.new_owner_user.name }} {{ certificate.new_owner_user.last_name }}</p>
    <p>Dueño anterior: {{ certificate.owner_user.name }} {{ certificate.owner_user.last_name }}</p>
    <p>ID de transaccion en Algorand: {{ certificate.transaction_id_algorand }}</p>
  </div>
  {% endfor %}

  <script src="static/js/app_material.js"></script>
  <script>
    // Función para cambiar entre el modo claro y oscuro
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      var darkModeToggle = document.getElementById('dark-mode-toggle');
      if (document.body.classList.contains('dark-mode')) {
        darkModeToggle.textContent = 'Modo Claro';
      } else {
        darkModeToggle.textContent = 'Modo Oscuro';
      }
    }

    // Agregar evento de clic al botón de alternar modo claro/oscuro
    var darkModeToggle = document.getElementById('dark-mode-toggle');
    darkModeToggle.addEventListener('click', toggleDarkMode);
  </script>
</body>
</html>
